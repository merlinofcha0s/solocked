<div class="row">
  <div class="col-12 col-md-3">
  </div>
  <div class="col-12 col-md-6">
          <div *ngIf="updateMode;then update else create"></div>
          <ng-template #create><h1 jhiTranslate="ninjaccountApp.accountsDB.add.title">Create a new account.</h1></ng-template>
          <ng-template #update><h1 jhiTranslate="ninjaccountApp.accountsDB.update.title">Update an account.</h1></ng-template>
          <form [formGroup]="accountForm" (ngSubmit)="onSubmitNewAccount()">
            <mat-form-field class="addAccountInput">
              <input matInput type="text" id="accountName" placeholder="{{'ninjaccountApp.accountsDB.add.name' | translate}}"
                     [formControl]="accountName" required>
                <mat-hint align="end">{{accountName.value?.length || 0}} / {{ maxName }}</mat-hint>
                <mat-error class="text-danger"
                          *ngIf="accountName.dirty && accountName.invalid && accountName.errors.required"
                          jhiTranslate="ninjaccountApp.accountsDB.validate.accountName.required">
                    A name is required
                </mat-error>
                <mat-error class="text-danger"
                          *ngIf="accountName.dirty && accountName.invalid && accountName.errors.maxlength"
                          jhiTranslate="ninjaccountApp.accountsDB.validate.accountName.max">
                    Too many characters
                </mat-error>
            </mat-form-field>
            <mat-form-field class="addAccountInput">
              <input type="text" matInput id="accountNumber" placeholder="{{'ninjaccountApp.accountsDB.add.number' | translate}}"
                     [formControl]="accountNumber">
                <mat-hint align="end">{{accountNumber.value?.length || 0}} / {{ maxNumber }}</mat-hint>
                <mat-error class="text-danger"
                          *ngIf="accountNumber.dirty && accountNumber.invalid && accountNumber.errors.maxlength"
                          jhiTranslate="ninjaccountApp.accountsDB.validate.accountNumber.max">
                    Too many characters
                </mat-error>
            </mat-form-field>
            <mat-form-field class="addAccountInput">
              <input matInput type="text" id="username" placeholder="{{'ninjaccountApp.accountsDB.add.username' | translate}}"
                     [formControl]="username" required>
                <mat-hint align="end">{{username.value?.length || 0}} / {{ maxLogin }}</mat-hint>
                <mat-error class="form-text text-danger"
                          *ngIf="username.dirty && username.invalid && username.errors.required"
                          jhiTranslate="ninjaccountApp.accountsDB.validate.username.required">
                    A username is required
                </mat-error>
                <mat-error class="text-danger"
                          *ngIf="username.dirty && username.invalid && username.errors.maxlength"
                          jhiTranslate="ninjaccountApp.accountsDB.validate.username.max">
                    Too many characters
                </mat-error>
            </mat-form-field>
            <mat-form-field class="addAccountInput">
              <input matInput type="{{ passwordType }}" id="password" placeholder="{{'ninjaccountApp.accountsDB.add.password' | translate}}"
                     [formControl]="password" required>
                <i matSuffix class="fa {{ iconPasswordType }} suffixIcon" (click)="onHideDisplayPassword()" aria-hidden="true"></i>
                <mat-hint align="end">{{password.value?.length || 0}} / {{ maxPassword }}</mat-hint>
                <mat-error class="text-danger"
                          *ngIf="password.dirty && password.invalid && password.errors.required"
                          jhiTranslate="ninjaccountApp.accountsDB.validate.password.required">
                    A password is required
                </mat-error>
                <mat-error class="text-danger"
                          *ngIf="password.dirty && password.invalid && password.errors.maxlength"
                          jhiTranslate="ninjaccountApp.accountsDB.validate.password.max">
                    Too many characters
                </mat-error>
            </mat-form-field>
              <mat-form-field class="addAccountInput">
                  <input matInput type="url" id="url" placeholder="{{'ninjaccountApp.accountsDB.add.url' | translate}}"
                         [formControl]="url">
                  <mat-hint align="end">{{url.value?.length || 0}} / {{ maxUrl }}</mat-hint>
                  <mat-error class="text-danger"
                             *ngIf="url.dirty && url.invalid && url.errors.pattern"
                             jhiTranslate="ninjaccountApp.accountsDB.validate.url.pattern">
                      Not a url
                  </mat-error>
              </mat-form-field>
            <mat-form-field class="addAccountInput">
              <textarea matInput matTextareaAutosize placeholder="{{'ninjaccountApp.accountsDB.add.notes' | translate}}" id="notes" rows="3" [formControl]="notes"></textarea>
                <mat-hint align="end">{{notes.value?.length || 0}} / {{ maxNotes }}</mat-hint>
             <mat-error class="text-danger"
                       *ngIf="notes.dirty && notes.invalid && notes.errors.maxlength"
                       jhiTranslate="ninjaccountApp.accountsDB.validate.notes.max">
                Too many characters
            </mat-error>
            </mat-form-field>
            <mat-form-field class="addAccountInput">
              <input matInput placeholder="{{'ninjaccountApp.accountsDB.add.tags' | translate}}" id="tags" [formControl]="tags"
                     data-role="tagsinput">
                <mat-hint align="end">{{tags.value?.length || 0}} / {{ maxTags }}</mat-hint>
            </mat-form-field>
              <div formArrayName="customs">
                  <div class="form-group" *ngFor="let cu of customs.controls; let i=index" [formGroup]="cu">
                      <div class="d-flex justify-content-around align-items-center">
                          <mat-form-field class="customLabel">
                                <input placeholder="{{'ninjaccountApp.accountsDB.add.custom.label' | translate}} ({{ i + 1 }})" matInput type="text" id="{{ i }}-key" formControlName="keyField"
                                    data-role="customInputKey" class="customInput">

                              <mat-hint align="end">{{ cu.get('keyField').value?.length || 0 }} / {{ maxKey }}</mat-hint>
                          </mat-form-field>
                          <mat-form-field class="customValue">
                                <input placeholder="{{'ninjaccountApp.accountsDB.add.custom.value' | translate}} ({{ i + 1 }})" matInput id="{{ i }}-value" data-role="customInputValue"
                                         formControlName="valueField">
                               <i matSuffix class="fa fa-trash suffixIcon" (click)="onDeleteCustomField(i)" aria-hidden="true"></i>
                              <mat-hint align="end">{{ cu.get('valueField').value?.length || 0 }} / {{ maxValue }}</mat-hint>
                          </mat-form-field>

                      </div>
                  </div>
              </div>
              <div *ngFor="let paymentBlock of customBlockCounter.paymentBlocks">
                 <jhi-payment-custom-block [payments]="payments" (onSyncPayments)="onSyncPayments($event)"></jhi-payment-custom-block>
              </div>
              <div class="d-flex flex-column align-items-center justify-content-center buttonContainer">
                <div class="d-flex align-content-center justify-content-center" style="width: 100%;">
                    <button mat-button type="button" class="addCustom" id="addCustomField"
                            (click)="addCustomField('', '')">
                        <i class="fa fa-bars custom-icons" aria-hidden="true"></i>
                        <div>{{'ninjaccountApp.accountsDB.add.custom.button' | translate}}</div>
                    </button>
                    <button mat-button type="button" class="addCustom" id="addCustomSetFields"
                            (click)="openCustomBlock()">
                        <i class="fa fa-id-card-o custom-icons" aria-hidden="true"></i>
                        <div>{{'ninjaccountApp.accountsDB.add.custom.sets.button' | translate}}</div>
                    </button>
                </div>
                <button mat-raised-button type="submit" class="default-validation-button" [disabled]="!accountForm.valid" id="addEditAccount">
                     <div *ngIf="updateMode;then updateBtn else createBtn"></div>
                     <ng-template #createBtn>{{'ninjaccountApp.accountsDB.add.button' | translate}}</ng-template>
                     <ng-template #updateBtn>{{'ninjaccountApp.accountsDB.update.button' | translate}}</ng-template>
                </button>
                 <div class="d-flex align-items-center justify-content-center">
                    <a [routerLink]="['/accounts']" mat-button class="m-4 text-center cancel">{{'register.form.cancel' | translate}}</a>
                </div>
                <div *ngIf="loading" class="loadingContainer">
                    <mat-spinner class="spinner" diameter="50" mode="indeterminate"></mat-spinner>
                    <div class="loadingMessage"
                         jhiTranslate="ninjaccountApp.accountsDB.add.loading">Please wait....</div>
                </div>
            </div>
          </form>
    </div>
  <div class="col-12 col-md-3"></div>
</div>

<mat-expansion-panel class="payment-custom-card" [expanded]="expanded" [hideToggle]="expanded">
  <mat-expansion-panel-header>
      <div class="d-flex justify-content-between width-max align-items-center">
          <div class="d-flex">
              <i class="fas fa-money-bill-alt payment-block-icons" aria-hidden="true"></i>
              <mat-panel-title class="title d-flex align-items-center justify-content-center">
                  <div jhiTranslate="ninjaccountApp.accountsDB.paymentblock.paymentCustomBlock.title">Payment fields</div>
              </mat-panel-title>
          </div>
          <i class="fas fa-trash suppress" *ngIf="!readOnlyMode" (click)="onSuppressPaymentBlock()"></i>
      </div>
  </mat-expansion-panel-header>
    <mat-card class="payments">
          <mat-card-content>
              <form (ngSubmit)="onAddPayment()" #paymentForm="ngForm">
                  <mat-grid-list cols="4" rowHeight="35px" gutterSize="0px">
                      <mat-grid-tile class="header top-left">{{ "ninjaccountApp.accountsDB.paymentblock.paymentCustomBlock.date" | translate }}</mat-grid-tile>
                      <mat-grid-tile class="header fixFF">{{ "ninjaccountApp.accountsDB.paymentblock.paymentCustomBlock.amount" | translate }}</mat-grid-tile>
                      <mat-grid-tile class="header">{{ "ninjaccountApp.accountsDB.paymentblock.paymentCustomBlock.method" | translate }}</mat-grid-tile>
                      <mat-grid-tile class="header top-right">{{ "ninjaccountApp.accountsDB.paymentblock.paymentCustomBlock.code" | translate }}</mat-grid-tile>
                      <ng-container *ngFor="let payment of payments;let i = index;let odd = odd; let last = last;">
                          <mat-grid-tile [class.odd]="odd">
                              <jhi-edit-date-inline [readonlyMode]="readOnlyMode" class="width-max" [value]="payment.date" (onValueChange)="onChangeDate(i, $event)"></jhi-edit-date-inline>
                          </mat-grid-tile>
                          <mat-grid-tile [class.odd]="odd">
                              <jhi-edit-inline [readonlyMode]="readOnlyMode" class="width-max" [type]="'currency'" [placeholder]="0"
                                               [value]="payment.amount" (onValueChange)="onChangeAmount(i, $event)"></jhi-edit-inline>
                          </mat-grid-tile>
                          <mat-grid-tile [class.odd]="odd">
                              <jhi-edit-inline [readonlyMode]="readOnlyMode" class="width-max" [type]="'string'" [placeholder]="_placeholderMethod"
                                               [value]="payment.method" (onValueChange)="onChangeMethod(i, $event)"></jhi-edit-inline>
                          </mat-grid-tile>
                          <mat-grid-tile [class.odd]="odd">
                              <jhi-edit-inline [readonlyMode]="readOnlyMode" class="width-max" [type]="'string'" [placeholder]="_placeholderCode"
                                               [value]="payment.code" (onValueChange)="onChangeCode(i, $event)"></jhi-edit-inline>
                          </mat-grid-tile>
                          <mat-grid-tile colspan="4" [class.odd]="odd" class="notes-add-payment">
                              <div *ngIf="!readOnlyMode" class="add-payments" [class.add-payments-grid]="!last" [class.add-payments-bottom]="last">
                                  <div class="d-flex justify-content-center container-btn-payment">
                                      <button *ngIf="last" mat-mini-fab class="btn-payment" type="submit">+</button>
                                      <button mat-mini-fab class="btn-payment" type="button" (click)="onRemovePayment(i)">-</button>
                                  </div>
                              </div>
                          </mat-grid-tile>
                      </ng-container>
                      <mat-grid-tile  colspan="4" class="tile-add-bottom" *ngIf="payments.length == 0 && !readOnlyMode">
                          <div class="add-payments add-payment-first">
                              <div class="d-flex justify-content-center container-btn-payment">
                                  <button mat-mini-fab class="btn-payment" type="submit">+</button>
                              </div>
                          </div>
                      </mat-grid-tile>
                  </mat-grid-list>
              </form>
          </mat-card-content>
      </mat-card>
    <div class="d-flex justify-content-around containerAverageTotal">
        <div class="d-flex align-items-center">
            <i class="fas fa-chart-bar iconTotalAverage"> </i>
            <div class="labelAverageTotal" jhiTranslate="ninjaccountApp.accountsDB.paymentblock.calcul.average">Average: </div>
            <div>${{ average }}</div>
        </div>
        <div class="d-flex align-items-center">
            <i class="fas fa-money-bill-alt iconTotalAverage"> </i>
            <div class="labelAverageTotal" jhiTranslate="ninjaccountApp.accountsDB.paymentblock.calcul.total">Total: </div>
            <div>${{ total }}</div>
        </div>
    </div>

</mat-expansion-panel>

<mat-card class="payment-custom-card">
  <mat-card-header>
      <div class="d-flex">
          <i class="fa fa-money payment-block-icons" aria-hidden="true"></i>
          <mat-card-title class="title">Payment fields</mat-card-title>
      </div>
  </mat-card-header>
  <mat-card-content>
      <mat-card class="payments">
          <mat-card-content>
              <form (ngSubmit)="onAddPayment()" #paymentForm="ngForm">
                  <mat-grid-list cols="4" rowHeight="40px" gutterSize="0px">
                      <mat-grid-tile class="header top-left">Paid date</mat-grid-tile>
                      <mat-grid-tile class="header">Amount paid</mat-grid-tile>
                      <mat-grid-tile class="header">Payment method</mat-grid-tile>
                      <mat-grid-tile class="header top-right">Code</mat-grid-tile>
                      <div *ngFor="let payment of payments;let i = index;let even = even; let odd = odd;">
                          <mat-grid-tile (click)="displayPayments[i].editDate=true;" [class.odd]="odd"
                                         (clickOutside)="displayPayments[i].editDate=false;displayPayments[i].overDate=false;"
                                         (mouseover)="displayPayments[i].overDate=true;" (mouseout)="displayPayments[i].overDate=false;">
                              <div class="field">
                                  <mat-form-field class="width-max" *ngIf="displayPayments[i].overDate || displayPayments[i].editDate;else dateValue">
                                      <input matInput class="payment-input-date" [(ngModel)]="payment.date" [matDatepicker]="picker" id="date" name="date">
                                      <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                                      <mat-datepicker #picker></mat-datepicker>
                                  </mat-form-field>
                                  <ng-template #dateValue>
                                      <div class="text-center width-max payment-value">{{ payment.date | date:'shortDate' }}</div>
                                  </ng-template>
                              </div>
                          </mat-grid-tile>
                          <mat-grid-tile (click)="displayPayments[i].editAmount=true;" [class.odd]="odd"
                                         (clickOutside)="displayPayments[i].editAmount=false;displayPayments[i].overAmount=false;"
                                         (mouseover)="displayPayments[i].overAmount=true;" (mouseout)="displayPayments[i].overAmount=false;">
                              <div class="field">
                                  <mat-form-field class="width-max" *ngIf="displayPayments[i].editAmount || displayPayments[i].overAmount;else amountValue">
                                      <input matInput class="payment-input-number" type="number" [(ngModel)]="payment.amount" id="amount" name="amount">
                                      <span matPrefix>$&nbsp;</span>
                                  </mat-form-field>
                                  <ng-template #amountValue>
                                     <div class="text-center width-max payment-value">{{ payment.amount | currency }}</div>
                                  </ng-template>
                              </div>
                          </mat-grid-tile>
                          <mat-grid-tile (click)="displayPayments[i].editMethod=true;clearPlaceholderMethod(i);" [class.odd]="odd"
                                         (clickOutside)="displayPayments[i].editMethod=false;displayPayments[i].overMethod=false;createPlaceholderMethod(i);"
                                         (mouseover)="displayPayments[i].overMethod=true;" (mouseout)="displayPayments[i].overMethod=false;">
                              <div class="field">
                                  <mat-form-field class="width-max" *ngIf="displayPayments[i].editMethod || displayPayments[i].overMethod;else methodValue">
                                      <input matInput class="payment-input" [(ngModel)]="payment.method" id="method" name="method">
                                  </mat-form-field>
                                  <ng-template #methodValue>
                                      <div class="text-center width-max payment-value">{{ payment.method }}</div>
                                  </ng-template>
                              </div>
                          </mat-grid-tile>
                          <mat-grid-tile (click)="displayPayments[i].editCode=true;clearPlaceholderCode(i);" [class.odd]="odd"
                                         (clickOutside)="displayPayments[i].editCode=false;displayPayments[i].overCode=false;createPlaceholderCode(i);"
                                         (mouseover)="displayPayments[i].overCode=true;" (mouseout)="displayPayments[i].overCode=false;">
                              <div class="field">
                                  <mat-form-field class="width-max" *ngIf="displayPayments[i].editCode || displayPayments[i].overCode;else codeValue">
                                      <input matInput class="payment-input" [(ngModel)]="payment.code" id="code" name="code">
                                  </mat-form-field>
                                   <ng-template #codeValue>
                                       <div class="text-center width-max payment-value">{{ payment.code }}</div>
                                   </ng-template>
                              </div>
                          </mat-grid-tile>
                          <mat-grid-tile colspan="4" (click)="displayPayments[i].editNotes=true;clearPlaceholderNotes(i);"
                                         (clickOutside)="displayPayments[i].editNotes=false;displayPayments[i].overNotes=false;createPlaceholderNotes(i);"
                                         (mouseover)="displayPayments[i].overNotes=true;"
                                         (mouseout)="displayPayments[i].overNotes=false;" [class.odd]="odd" class="notes-add-payment">
                              <div class="d-flex flex-column width-max">
                                  <div class="width-max" *ngIf="displayPayments[i].editNotes || displayPayments[i].overNotes;else noteValue">
                                       <div class="d-flex weight-max">
                                           <div class="notesHead">Notes: </div>
                                           <input class="notes-style note-area" [class.odd]="odd"
                                                [(ngModel)]="payment.notes" id="notes" name="notes"/>
                                       </div>
                                  </div>
                                  <ng-template #noteValue>
                                      <div style="width: 100%;" class="d-flex">
                                          <div class="font-weight-bold notesHead">Notes: </div>
                                          <div class="notes-style note-value payment-value">{{ payment.notes }}</div>
                                      </div>
                                  </ng-template>
                                  <div class="add-payments">
                                      <div class="d-flex justify-content-center container-btn-payment">
                                          <button mat-mini-fab color="primary" class="btn-payment" type="button" (click)="onRemovePayment(i)">-</button>
                                      </div>
                                  </div>
                              </div>
                          </mat-grid-tile>
                      </div>
                      <mat-grid-tile colspan="4" style="z-index: 10; overflow: unset;">
                          <div class="add-payments">
                              <div class="d-flex justify-content-center container-btn-payment">
                                  <button mat-mini-fab color="primary" class="btn-payment" type="submit">+</button>
                              </div>
                          </div>
                      </mat-grid-tile>
                  </mat-grid-list>
                  </div>
              </form>
          </mat-card-content>
      </mat-card>
  </mat-card-content>
</mat-card>
